---
import i18n from '../i18n.js';

export interface Props {
  text: string;
  label: string;
}

const { text, label } = Astro.props as Props;
---

<div class="flex flex-col sm:flex-row sm:space-x-4 justify-start items-center sm:items-start space-y-4 sm:space-y-2">
  <div class="clipboard-button text-xs sm:text-sm md:text-base lg:text-lg border-2 border-accent rounded-full px-6 py-4 cursor-pointer relative text-center sm:text-left" data-text={text}>
    {label}
    <div id="copied-msg" class="copy-alert absolute top-[-40px] left-1/2 transform -translate-x-1/2 px-3 py-2 bg-accent text-white rounded-md text-sm opacity-0 transition-opacity duration-300">
      ðŸ“‹ Kopiert!
    </div>
  </div>
</div>

<script>
  import i18n from '../i18n.js';

  const buttons = document.querySelectorAll('.clipboard-button');

  buttons.forEach((button) => {
    button.addEventListener('click', () => {
      const textToCopy = button.getAttribute('data-text');
      const alertBox = button.querySelector('.copy-alert');

      navigator.clipboard.writeText(textToCopy).then(() => {
        alertBox.textContent = i18n.t('alertCopied');

        alertBox.classList.remove('opacity-0');
        alertBox.classList.add('opacity-100');

        setTimeout(() => {
          alertBox.classList.remove('opacity-100');
          alertBox.classList.add('opacity-0');
        }, 2000);
      }).catch((error) => {
        console.error('Error al copiar al portapapeles:', error);
      });
    });
  });
</script>

<style>
  .clipboard-button {
    position: relative;
  }

  .copy-alert {
    position: absolute;
    top: -40px;
    left: 50%;
    transform: translateX(-50%);
    color: #fff;
    padding: 8px 12px;
    border-radius: 4px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease-in-out;
  }

  .copy-alert.opacity-100 {
    opacity: 1;
  }
</style>
